{% extends "base.jinja" %}
{% block content %}
  <h1 class="title">Cast — {{ production.title }}</h1>

  <div class="box">
  {% for r in cast %}
    <div class="role-line">
      <strong>{{ r.role }}</strong>
      {% if r.students %}
        : {{ r.students | join(', ') }}
      {% else %}
        : <em>—</em>
      {% endif %}
    </div>
  {% endfor %}
  </div>

  <hr>
  <h3 class="title is-5">Assign Role</h3>
  <form method="POST">
    <div class="field">
      <label class="label">Student</label>
      <div class="control">
        <div class="select">
          <select name="student_id">
            {% for s in students %}
              <option value="{{ s.id }}">{{ s.full_name() }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>
    <div class="field">
      <label class="label">Role name</label>
      <div class="control"><input class="input" name="role" placeholder="e.g., Gabriella"></div>
    </div>
    <div class="field">
      <div class="control">
        <label class="checkbox"><input type="checkbox" name="is_group" value="1"> Group role?</label>
      </div>
    </div>
    <div class="field">
      <div class="control"><button class="button is-primary" type="submit">Assign</button></div>
    </div>
  </form>

  <p class="mt-3"><a href="{{ url_for('view.view_production', production_id=production.id) }}">Back to program</a></p>
{% endblock %}